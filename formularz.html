<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formularz zgłoszeniowy</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="form-container">
        <h1>Formularz zgłoszeniowy</h1>
        <form action="przetworz.php" method="post">
            <label for="marka">Marka pojazdu:</label>
            <input type="text" name="marka" id="marka" required />

            <label for="model">Model pojazdu:</label>
            <input type="text" name="model" id="model" required />

            <label for="moc">Moc (KM):</label>
            <input type="number" name="moc" id="moc" required />

            <label for="pojemnosc">Pojemność (cm³):</label>
            <input type="number" name="pojemnosc" id="pojemnosc" required />

            <label for="rok_produkcji">Rok produkcji:</label>
            <input type="number" name="rok_produkcji" id="rok_produkcji" required />

            <input type="button" value="Sprawdź" id="sprawdz-button" />

            <div id="dane-klienta" style="display: none">
                <h2>Dane klienta:</h2>

                <label for="wojewodztwo">Województwo:</label>
                <select name="wojewodztwo" id="wojewodztwo">
                    <option value="">-- Wybierz województwo --</option>
                    <option value="mazowieckie">Mazowieckie</option>
                    <option value="malopolskie">Małopolskie</option>
                    <option value="slaskie">Śląskie</option>
                </select>






                
                <label for="imie_nick">Imię lub nick:</label>
                <input type="text" name="imie_nick" id="imie_nick" required />

                <label for="adres">Adres:</label>
                <input type="text" name="adres" id="adres" required />

                <label for="kod">Kod pocztowy:</label>
                <input type="text" name="kod" id="kod" required />

                <label for="miasto">Miasto:</label>
                <input type="text" name="miasto" id="miasto" required />

                <label for="telefon">Telefon:</label>
                <input type="text" name="telefon" id="telefon" required />

                <label for="email">E-mail:</label>
                <input type="email" name="email" id="email" required />
            </div>

            <input type="submit" value="Wyślij" id="submit-button" disabled />
        </form>

        <div class="selected-values">
            <h2>Wybrane wartości:</h2>
            
            <p><strong>Marka:</strong> <span id="selected-marka">-</span></p>
            <p><strong>Model:</strong> <span id="selected-model">-</span></p>
            <p><strong>Moc:</strong> <span id="selected-moc">-</span></p>
            <p><strong>Pojemność:</strong> <span id="selected-pojemnosc">-</span></p>
            <p><strong>Rok produkcji:</strong> <span id="selected-rok_produkcji">-</span></p>
            <hr>
            <p><strong>Imię/Nick:</strong> <span id="selected-imie_nick">-</span></p>
            <p><strong>Adres:</strong> <span id="selected-adres">-</span></p>
            <p><strong>Kod pocztowy:</strong> <span id="selected-kod">-</span></p>
            <p><strong>Miasto:</strong> <span id="selected-miasto">-</span></p>
            <p><strong>Telefon:</strong> <span id="selected-telefon">-</span></p>
            <p><strong>Email:</strong> <span id="selected-email">-</span></p>
            <p><strong>Województwo:</strong> <span id="selected-wojewodztwo">-</span></p>
            <hr>
            <h3>Firmy dla wybranego województwa:</h3>
            <label for="firma">Wybierz firmę:</label>
    <select id="firma">
        <option value="">-- Wybierz firmę --</option>
    </select>
    <div id="daneFirmy"></div>
<script>
        // PRZECHOWYWANIE FIRM W PAMIĘCI (ZAMIAST GET_FIRMY.PHP)
        let firmy = {
            "mazowieckie": [
                { "firma": "AutoSerwis Jan", "telefon": "123456789", "email": "serwis.jan@example.com" },
                { "firma": "Mechanika Kowalski", "telefon": "987654321", "email": "mechanika.kowalski@example.com" }
            ],
            "malopolskie": [
                { "firma": "AutoNaprawa Nowak", "telefon": "555888999", "email": "naprawa.nowak@example.com" }
            ],
            "slaskie": [
                { "firma": "Serwis AutoFix", "telefon": "666777888", "email": "autofix@example.com" }
            ]
        };

        // Pobieranie referencji do elementów HTML
        let selectWojewodztwo = document.getElementById("wojewodztwo");
        let selectFirma = document.getElementById("firma");
        let daneFirmyDiv = document.getElementById("daneFirmy");

        // Obsługa zmiany województwa
        selectWojewodztwo.addEventListener("change", function() {
            let wybraneWojewodztwo = this.value;
            selectFirma.innerHTML = '<option value="">-- Wybierz firmę --</option>'; // Resetowanie listy firm

            if (wybraneWojewodztwo && firmy[wybraneWojewodztwo]) {
                firmy[wybraneWojewodztwo].forEach(firma => {
                    let option = document.createElement("option");
                    option.value = firma.firma;
                    option.textContent = firma.firma;
                    selectFirma.appendChild(option);
                });
            }
        });

        // Obsługa zmiany firmy
        selectFirma.addEventListener("change", function() {
            let wybranaFirma = this.value;
            let wybraneWojewodztwo = selectWojewodztwo.value;
            
            if (wybraneWojewodztwo && wybranaFirma) {
                let firma = firmy[wybraneWojewodztwo].find(f => f.firma === wybranaFirma);
                if (firma) {
                    daneFirmyDiv.innerHTML = `
                        <p><strong>Firma:</strong> ${firma.firma}</p>
                        <p><strong>Telefon:</strong> ${firma.telefon}</p>
                        <p><strong>Email:</strong> <a href="mailto:${firma.email}">${firma.email}</a></p>
                    `;
                }
            } else {
                daneFirmyDiv.innerHTML = "";
            }
        });
    </script>


                
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
