<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formularz zgłoszeniowy</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Style dla przycisku Wyślij */
        #submit-button {
            background-color: gray; /* Domyślny kolor przycisku */
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: not-allowed; /* Kursor "nieaktywny" */
        }

        #submit-button.active {
            background-color: green; /* Kolor przycisku, gdy jest aktywny */
            cursor: pointer; /* Kursor "klikalny" */
        }

        /* Ukryj dane klienta na początku */
        #dane-klienta {
            display: none;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Formularz zgłoszeniowy</h1>
        <form action="przetworz.php" method="post">
            <!-- Dane samochodu -->
            <h2>Dane samochodu:</h2>
            <label for="marka">Marka pojazdu:</label>
            <input type="text" name="marka" id="marka" required>

            <label for="model">Model pojazdu:</label>
            <input type="text" name="model" id="model" required>

            <label for="kod_silnika">Kod silnika:</label>
            <input type="text" name="kod_silnika" id="kod_silnika" required>

            <label for="moc">Moc (KM):</label>
            <input type="number" name="moc" id="moc" required>

            <label for="pojemnosc">Pojemność (cm³):</label>
            <input type="number" name="pojemnosc" id="pojemnosc" required>

            <label for="rok_produkcji">Rok produkcji:</label>
            <input type="number" name="rok_produkcji" id="rok_produkcji" required>

            <!-- Pole cena -->
            <label for="cena">Cena (zł):</label>
            <input type="number" name="cena" id="cena" readonly>

            <!-- Przycisk do sprawdzenia danych samochodu -->
            <button type="button" id="sprawdz-dane">Sprawdź dane samochodu</button>

            <!-- Dane klienta (ukryte na początku) -->
            <div id="dane-klienta">
                <h2>Dane klienta:</h2>
                <label for="imie_nick">Imię lub nick:</label>
                <input type="text" name="imie_nick" id="imie_nick" required>

                <label for="adres">Adres:</label>
                <input type="text" name="adres" id="adres" required>

                <label for="kod">Kod pocztowy:</label>
                <input type="text" name="kod" id="kod" required>

                <label for="miasto">Miasto:</label>
                <input type="text" name="miasto" id="miasto" required>

                <label for="wojewodztwo">Województwo:</label>
                <input type="text" name="wojewodztwo" id="wojewodztwo" required>

                <label for="telefon">Telefon:</label>
                <input type="text" name="telefon" id="telefon" required>

                <label for="email">E-mail:</label>
                <input type="email" name="email" id="email" required>
            </div>

            <!-- Przycisk Wyślij -->
            <input type="submit" value="Wyślij" id="submit-button" disabled>
        </form>
    </div>

    <script>
        // Funkcja do sprawdzania danych samochodu
        function sprawdzDaneSamochodu() {
            const marka = document.getElementById('marka').value.trim();
            const model = document.getElementById('model').value.trim();
            const kodSilnika = document.getElementById('kod_silnika').value.trim();
            const moc = document.getElementById('moc').value.trim();
            const pojemnosc = document.getElementById('pojemnosc').value.trim();
            const rokProdukcji = document.getElementById('rok_produkcji').value.trim();

            // Sprawdź, czy wszystkie pola samochodu są wypełnione
            if (marka && model && kodSilnika && moc && pojemnosc && rokProdukcji) {
                // Pokaż sekcję danych klienta
                document.getElementById('dane-klienta').style.display = 'block';
                // Aktywuj przycisk Wyślij, jeśli dane klienta są wypełnione
                sprawdzFormularz();
            } else {
                alert("Proszę wypełnić wszystkie pola danych samochodu.");
            }
        }

        // Funkcja do sprawdzania stanu formularza
        function sprawdzFormularz() {
            const daneKlienta = document.getElementById('dane-klienta'); // Sekcja danych klienta
            const submitButton = document.getElementById('submit-button'); // Przycisk Wyślij

            // Sprawdź, czy wszystkie wymagane pola są wypełnione
            const polaSamochodu = document.querySelectorAll('input[id^="marka"], input[id^="model"], input[id^="kod_silnika"], input[id^="moc"], input[id^="pojemnosc"], input[id^="rok_produkcji"]');
            const polaKlienta = document.querySelectorAll('#dane-klienta input');
            let wszystkieWypelnione = true;

            // Sprawdź pola samochodu
            polaSamochodu.forEach(pole => {
                if (pole.value.trim() === '') {
                    wszystkieWypelnione = false;
                }
            });

            // Sprawdź pola klienta (jeśli sekcja jest widoczna)
            if (daneKlienta.style.display === 'block') {
                polaKlienta.forEach(pole => {
                    if (pole.value.trim() === '') {
                        wszystkieWypelnione = false;
                    }
                });
            }

            // Aktywuj przycisk Wyślij tylko, jeśli wszystkie pola są wypełnione
            if (wszystkieWypelnione) {
                submitButton.disabled = false;
                submitButton.classList.add('active'); // Zmień kolor przycisku na zielony
            } else {
                submitButton.disabled = true;
                submitButton.classList.remove('active'); // Przywróć domyślny kolor przycisku
            }
        }

        // Nasłuchuj kliknięcia przycisku "Sprawdź dane samochodu"
        document.getElementById('sprawdz-dane').addEventListener('click', sprawdzDaneSamochodu);

        // Nasłuchuj zmian w polach danych samochodu i klienta
        const wszystkiePola = document.querySelectorAll('input');
        wszystkiePola.forEach(pole => {
            pole.addEventListener('input', sprawdzFormularz);
        });

        // Wywołaj funkcję sprawdzFormularz na starcie, aby ustawić początkowy stan
        sprawdzFormularz();
    </script>
</body>
</html>
